var l=Object.defineProperty;var b=(i,e,s)=>e in i?l(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var r=(i,e,s)=>(b(i,typeof e!="symbol"?e+"":e,s),s);let f=0;class p{constructor(){r(this,"subscribers");r(this,"toasts");r(this,"subscribe",e=>(this.subscribers.push(e),()=>{const s=this.subscribers.indexOf(e);this.subscribers.splice(s,1)}));r(this,"publish",e=>{this.subscribers.forEach(s=>s(e))});r(this,"addToast",e=>{this.publish(e),this.toasts=[...this.toasts,e]});r(this,"create",e=>{var o;const{message:s,...c}=e,n=typeof(e==null?void 0:e.id)=="number"||e.id&&((o=e.id)==null?void 0:o.length)>0?e.id:f++;return this.toasts.find(u=>u.id===n)?this.toasts=this.toasts.map(u=>u.id===n?(this.publish({...u,...e,id:n,title:s}),{...u,...e,id:n,title:s}):u):this.addToast({title:s,...c,id:n}),n});r(this,"dismiss",e=>(e||this.toasts.forEach(s=>{this.subscribers.forEach(c=>c({id:s.id,dismiss:!0}))}),this.subscribers.forEach(s=>s({id:e,dismiss:!0})),e));r(this,"message",(e,s)=>this.create({...s,message:e}));r(this,"error",(e,s)=>this.create({...s,message:e,type:"error"}));r(this,"success",(e,s)=>this.create({...s,type:"success",message:e}));r(this,"info",(e,s)=>this.create({...s,type:"info",message:e}));r(this,"warning",(e,s)=>this.create({...s,type:"warning",message:e}));r(this,"loading",(e,s)=>this.create({...s,type:"loading",message:e}));r(this,"promise",(e,s)=>{const c=this.create({...s,promise:e,type:"loading",message:s==null?void 0:s.loading}),n=typeof e=="function"?e():e;return s!=null&&s.success&&n.then(h=>{const o=typeof(s==null?void 0:s.success)=="function"?s.success(h):s==null?void 0:s.success;this.create({id:c,type:"success",message:o})}),s!=null&&s.error&&n.catch(h=>{const o=typeof(s==null?void 0:s.error)=="function"?s.error(h):s==null?void 0:s.error;this.create({id:c,type:"error",message:o})}),c});r(this,"custom",(e,s)=>{const c=(s==null?void 0:s.id)||f++;this.publish({component:e,id:c,...s})});this.subscribers=[],this.toasts=[]}}const t=new p;function g(i,e){const s=(e==null?void 0:e.id)||f++;return t.addToast({title:i,...e,id:s}),s}const m=g,E=Object.assign(m,{success:t.success,info:t.info,warning:t.warning,error:t.error,custom:t.custom,message:t.message,promise:t.promise,dismiss:t.dismiss,loading:t.loading}),T=i=>({subscribe:i});export{t as T,E as t,T as u};
